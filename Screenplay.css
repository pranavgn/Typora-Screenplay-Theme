/* Typora Screenplay Theme - Industry Standard Format */
/* Updated for "Gutter" Page Numbers */

/* =========================================================
   1. GLOBAL & SCREEN SETTINGS
   ========================================================= */

body {
    font-size: 12pt;
    font-family: "Courier Screenplay", "Courier New", "Courier", monospace;
    font-weight: normal;
    line-height: 1;
    padding: 0;
    margin: 0;
    color: #000;
}

/* Screen Simulation: Creates the visual "paper" in the editor */
#write {
    max-width: none;
    width: 8.5in;        /* Standard Letter Width */
    margin: 0 auto;
    padding-top: 1in;
    padding-bottom: 1in;
    padding-left: 1.5in; /* Standard Left Margin */
    
    /* CHANGE: Reduced right padding to 0.5in. 
       This keeps the "paper" edge further out, creating a visual "gutter"
       on the right side where page numbers/scene numbers can sit 
       without hitting the paper edge. */
    padding-right: 0.5in; 
    
    min-height: 11in;
    box-sizing: border-box;
    background-color: white;
}

/* Reset margins for all elements */
h1, h2, h3, h4, h5, h6, p, blockquote {
    margin: 0;
    padding: 0;
    font-weight: normal;
    font-size: 12pt;
    line-height: 1;
}

/* =========================================================
   2. ELEMENT STYLING (Screen & Print)
   ========================================================= */

/* GLOBAL TEXT CONSTRAINT
   Since we widened the page margin to 0.5in, we must manually force 
   the text to stop at 6in wide (standard screenplay width). 
   This ensures text doesn't flow into the area reserved for numbers. */
h1, h5, p {
    max-width: 6in;
}

/* Scene Heading (h1) */
h1 {
    text-transform: uppercase;
    font-weight: bold;
    margin-top: 2em;
    margin-bottom: 1em;
    margin-left: 0;
    counter-increment: scene;
    position: relative;
    display: block;
    min-height: 1em;
}

h1:empty::before {
    content: "\200B";
}

/* Scene Numbering */
h1::after {
    content: counter(scene);
    position: absolute;
    
    /* CHANGE: Position relative to the text block, not the page edge.
       Text ends at 6in. We place the number at 6.1in.
       This puts it in the empty "gutter" we created. */
    left: 6.1in;
    right: auto;
    
    top: 0;
    width: 0.5in; 
    text-align: right; /* Aligns number against the invisible 6.6in line */
    font-weight: normal;
    text-transform: none;
}

/* Reset scene counter */
html, #write {
    counter-reset: scene;
}

/* Action (p) */
p {
    margin-left: 0;
    margin-top: 1em;
    margin-bottom: 1em;
    text-align: left;
}

/* Character Name (h2) */
/* Indent 2.2" (1.5 + 2.2 = 3.7) */
h2 {
    text-transform: uppercase;
    margin-left: 2.2in; 
    margin-top: 1em;
    margin-bottom: 0;
    max-width: 6in; /* Safety constraint */
}

/* Dialogue (h3) */
/* Indent 1.0" (1.5 + 1.0 = 2.5). Max width ~3.5" */
h3 {
    text-transform: none;
    font-weight: normal;
    margin-left: 1in;
    margin-right: 0;
    margin-top: 0;
    margin-bottom: 1em;
    max-width: 3.5in;
}

/* Parenthetical (h4) */
/* Indent 1.6" (1.5 + 1.6 = 3.1) */
h4 {
    text-transform: none;
    font-weight: normal;
    margin-left: 1.6in;
    margin-top: 0;
    margin-bottom: 0;
    max-width: 3.5in; /* Safety constraint */
}

h4::before { content: "("; }
h4::after { content: ")"; }

/* Transition (h5) */
h5 {
    text-transform: uppercase;
    text-align: right;
    margin-top: 1em;
    margin-bottom: 1em;
    margin-right: 0;
}

/* Title Page Blockquote */
blockquote {
    text-align: center;
    margin: 3in auto;
    max-width: 4in;
    page-break-after: always;
    break-after: always;
}

blockquote p {
    text-align: center;
    margin: 1em auto;
    max-width: 100%;
}

/* Links */
a {
    text-decoration: none;
    color: inherit;
}

/* Task Lists */
.task-list-item { list-style-type: none; }
.task-list-item-checkbox { margin-left: -1.8em; margin-right: 8px; }

/* Code blocks */
pre {
    padding: .5rem 1rem;
    background-color: #f8f8f8;
    font-family: "Courier Screenplay", "Courier New", "Courier", monospace;
}

/* =========================================================
   3. PRINT / PDF EXPORT CONFIGURATION
   ========================================================= */

@media print {
    @page {
        size: letter;
        margin-top: 1in;
        margin-bottom: 1in;
        margin-left: 1.5in;
        
        /* CHANGE: Reduced print margin to 0.5in.
           This tells the printer/PDF to print closer to the right edge,
           allowing the Page Number header to sit in that space. */
        margin-right: 0.5in;
    }

    html, body {
        width: 100%;
        margin: 0 !important;
        padding: 0 !important;
        background: transparent !important;
        -webkit-text-size-adjust: 100%; 
    }

    #write {
        width: auto !important;
        max-width: none !important;
        margin: 0 !important;
        padding: 0 !important;
        border: none !important;
        transform: none !important; 
        overflow: visible !important;
    }

    /* Force text constraints in Print */
    p, h1, h2, h3, h4, h5, blockquote {
        max-width: 6in !important;
    }

    /* Page Numbers */
    #write::before {
        content: none; 
    }

    /* Scene Numbering Adjustment for Print */
    h1 {
        position: relative;
    }

    h1::after {
        /* Ensure Scene Numbers print in the gutter to the right of text */
        right: auto;
        left: 6.1in; 
    }

    /* Formatting protections */
    h2, h4 { 
        page-break-after: avoid; 
        break-after: avoid; 
    }
    
    h3 { 
        page-break-before: avoid; 
        break-before: avoid; 
    }
    
    hr {
        page-break-after: always;
        break-after: always;
        border: none;
        visibility: hidden; 
    }
}